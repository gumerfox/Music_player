{"version":3,"file":"index.min.js","mappings":"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","sources":["webpack://gulp-2022/webpack/bootstrap","webpack://gulp-2022/webpack/runtime/make namespace object","webpack://gulp-2022/./src/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const API_URL = \"https://https://api-music-lilac.vercel.app/\";\nlet dataMusic = [];\nlet playlist = [];\n\nconst favouriteMusic = localStorage.getItem(\"favourite\") ? JSON.parse(localStorage.getItem(\"favourite\")) : [];\n\nconst audio = new Audio();\nconst tracksCard = document.getElementsByClassName(\"track\");\n\nconst player = document.querySelector(\".player\");\nconst pauseBtn = document.querySelector(\".player__action_pause\");\nconst stopBtn = document.querySelector(\".player__action_stop\");\nconst prevBtn = document.querySelector(\".player__action_prev\");\nconst nextBtn = document.querySelector(\".player__action_next\");\nconst muteBtn = document.querySelector(\".player__action_mute\");\nconst favouriteBtn = document.querySelector(\".player__action_favourite\");\nconst playerRange = document.querySelector(\".player__range\");\nconst playerTimePassed = document.querySelector(\".player__time-passed\");\nconst playerTimeTotal = document.querySelector(\".player__time-total\");\nconst volumeRange = document.querySelector(\".player__volume-range\");\n\nconst trackTitle = document.querySelector(\".track-info__title\");\nconst trackArtist = document.querySelector(\".track-info__artist\");\n\nconst headerLogo = document.querySelector(\".header__logo\");\nconst searchForm = document.querySelector(\".header__form\");\nconst headerFavouriteBtn = document.querySelector(\".header__favourite\");\n\nconst catalogList = document.querySelector(\".catalog__list\");\n\nfunction throttle(callee, timeout) {\n  let timer = null;\n  return function perform(...args) {\n    if (timer) return;\n    timer = setTimeout(() => {\n      callee(...args);\n      clearTimeout(timer);\n      timer = null;\n    }, timeout);\n  };\n}\n\nconst pausePlayer = () => {\n  const trackActive = document.querySelector(\".catalog__track_active\");\n  if (audio.paused) {\n    audio.play();\n    pauseBtn.classList.remove(\"player__action_play\");\n    trackActive.classList.remove(\"catalog__track_pause\");\n  } else {\n    audio.pause();\n    pauseBtn.classList.add(\"player__action_play\");\n    trackActive.classList.add(\"catalog__track_pause\");\n  }\n};\n\nconst playMusic = (e) => {\n  e.preventDefault();\n  const trackActive = e.currentTarget;\n\n  if (trackActive.classList.contains(\"catalog__track_active\")) {\n    pausePlayer();\n    return;\n  }\n\n  const id = trackActive.dataset.track;\n\n  const index = favouriteMusic.indexOf(id);\n\n  if (index !== -1) {\n    favouriteBtn.classList.add(\"player__action_favourite_active\");\n  } else {\n    favouriteBtn.classList.remove(\"player__action_favourite_active\");\n  }\n\n  let i = 0;\n  const track = playlist.find((item, index) => {\n    i = index;\n    return id === item.id;\n  });\n\n  audio.src = `${API_URL}${track.mp3}`;\n  //audio.src = track.mp3;\n\n  trackArtist.textContent = track.artist;\n  trackTitle.textContent = track.track;\n  audio.play();\n  pauseBtn.classList.remove(\"player__action_play\");\n  player.classList.add(\"player_active\");\n  player.dataset.track = id;\n\n  const prevTrack = i === 0 ? playlist.length - 1 : i - 1;\n  const nextTrack = i + 1 === playlist.length ? 0 : i + 1;\n  prevBtn.dataset.track = playlist[prevTrack].id;\n  nextBtn.dataset.track = playlist[nextTrack].id;\n  favouriteBtn.dataset.track = id;\n\n  for (let i = 0; i < tracksCard.length; i++) {\n    if (id === tracksCard[i].dataset.track) {\n      tracksCard[i].classList.add(\"catalog__track_active\");\n    } else {\n      tracksCard[i].classList.remove(\"catalog__track_active\");\n    }\n  }\n};\n\nconst addClickTrack = () => {\n  for (let i = 0; i < tracksCard.length; i++) {\n    tracksCard[i].addEventListener(\"click\", playMusic);\n  }\n};\n\nconst renderCard = (item) => {\n  const li = document.createElement(\"li\");\n\n  li.classList.add(\"catalog__item\");\n  li.innerHTML = `\n        <a class=\"catalog__track track\" href=\"#\" data-track=\"${item.id}\">\n          <div class=\"track__img-inner\">\n            <img class=\"track__img\" src=\"${API_URL}${item.poster}\" alt=\"${item.artist} ${item.track}\" />\n          </div>\n          <div class=\"track__info track-info\">\n            <p class=\"track-info__title\">${item.track}</p>\n            <p class=\"track-info__artist\">${item.artist}</p>\n          </div>\n        </a>\n    `;\n  if (player.dataset.track === item.id) {\n    li.firstElementChild.classList.add(\"catalog__track_active\");\n    if (audio.paused) {\n      li.firstElementChild.classList.add(\"catalog__track_pause\");\n    }\n  }\n  return li;\n};\n\nconst renderCatalog = (dataList) => {\n  playlist = [...dataList];\n  if (playlist.length === 0) {\n    catalogList.textContent = `Ничего не найдено`;\n    return;\n  }\n  catalogList.textContent = ``;\n  const listCards = dataList.map(renderCard);\n  catalogList.append(...listCards);\n  addClickTrack();\n  const catalogAddBtn = createAddBtn();\n  checkCount(catalogAddBtn);\n};\n\nconst checkCount = (catalogAddBtn, i = 1) => {\n  if (catalogList.children.length === 0) {\n    return;\n  }\n\n  if (catalogList.clientHeight > tracksCard[0].clientHeight * 3) {\n    tracksCard[tracksCard.length - i].style.display = \"none\";\n    return checkCount(catalogAddBtn, i + 1);\n  } else if (i !== 1) {\n    catalogList.append(catalogAddBtn);\n  }\n};\n\nconst updateTime = () => {\n  const total = audio.duration;\n  const currentTime = audio.currentTime;\n  const progress = (currentTime / total) * playerRange.max;\n  playerRange.value = progress ? progress : 0;\n\n  const minutesPassed = Math.floor(currentTime / 60) || \"0\";\n  const secondsPassed = Math.floor(currentTime % 60) || \"0\";\n\n  const minutesTotal = Math.floor(total / 60) || \"0\";\n  const secondsTotal = Math.floor(total % 60) || \"0\";\n\n  playerTimePassed.textContent = `${minutesPassed}:${secondsPassed < 10 ? \"0\" + secondsPassed : secondsPassed}`;\n  playerTimeTotal.textContent = `${minutesTotal}:${secondsTotal < 10 ? \"0\" + secondsTotal : secondsTotal}`;\n};\n\nconst createAddBtn = () => {\n  const catalogAddBtn = document.createElement(\"div\");\n  catalogAddBtn.classList.add(\"catalog__show-more-inner\");\n\n  catalogAddBtn.innerHTML = `\n    <button class=\"catalog__show-more\">Увидеть всё</button>\n   `;\n\n  catalogAddBtn.addEventListener(\"click\", function () {\n    [...tracksCard].forEach((item) => {\n      item.style.display = ``;\n      catalogAddBtn.remove();\n    });\n  });\n\n  return catalogAddBtn;\n};\n\nconst eventListeners = () => {\n  prevBtn.addEventListener(\"click\", playMusic);\n  nextBtn.addEventListener(\"click\", playMusic);\n  pauseBtn.addEventListener(\"click\", pausePlayer);\n\n  audio.addEventListener(\"ended\", function () {\n    nextBtn.dispatchEvent(new Event(\"click\", { bubbles: true }));\n  });\n\n  const updateTimeThrottle = throttle(updateTime, 700);\n  audio.addEventListener(\"timeupdate\", updateTimeThrottle);\n\n  playerRange.addEventListener(\"change\", function () {\n    const progress = playerRange.value;\n    audio.currentTime = (progress / playerRange.max) * audio.duration;\n  });\n\n  headerFavouriteBtn.addEventListener(\"click\", function () {\n    const data = dataMusic.filter((item) => favouriteMusic.includes(item.id));\n    renderCatalog(data);\n  });\n\n  stopBtn.addEventListener(\"click\", function (e) {\n    audio.src = ``;\n    player.classList.remove(\"player_active\");\n\n    if (document.querySelector(\".catalog__track_active\")) {\n      document.querySelector(\".catalog__track_active\").classList.remove(\"catalog__track_active\");\n    }\n  });\n\n  headerLogo.addEventListener(\"click\", function () {\n    renderCatalog(dataMusic);\n  });\n\n  favouriteBtn.addEventListener(\"click\", function () {\n    const index = favouriteMusic.indexOf(favouriteBtn.dataset.track);\n\n    if (index === -1) {\n      favouriteMusic.push(favouriteBtn.dataset.track);\n      favouriteBtn.classList.add(\"player__action_favourite_active\");\n    } else {\n      favouriteMusic.splice(index, 1);\n      favouriteBtn.classList.remove(\"player__action_favourite_active\");\n    }\n\n    localStorage.setItem(\"favourite\", JSON.stringify(favouriteMusic));\n  });\n\n  volumeRange.addEventListener(\"input\", function () {\n    muteBtn.classList.remove(\"player__action_unmute\");\n    const value = volumeRange.value;\n    audio.volume = value / 100;\n  });\n\n  muteBtn.addEventListener(\"click\", function () {\n    if (audio.volume) {\n      localStorage.setItem(\"volume\", audio.volume);\n      audio.volume = 0;\n      muteBtn.classList.add(\"player__action_unmute\");\n      volumeRange.value = 0;\n    } else {\n      audio.volume = localStorage.getItem(\"volume\");\n      muteBtn.classList.remove(\"player__action_unmute\");\n      volumeRange.value = audio.volume * 100;\n    }\n  });\n\n  searchForm.addEventListener(\"submit\", async function (e) {\n    e.preventDefault();\n    playlist = await fetch(`${API_URL}api/music?search=${searchForm.search.value}`).then((data) => data.json());\n    renderCatalog(playlist);\n    eventListeners();\n  });\n};\n\nconst init = async () => {\n  audio.volume = localStorage.getItem(\"volume\") || 1;\n  volumeRange.value = audio.volume * 100;\n\n  dataMusic = await fetch(`${API_URL}api/music`).then((data) => data.json());\n\n  renderCatalog(dataMusic);\n  eventListeners();\n};\n\ninit();\n"],"names":["__webpack_require__","exports","Symbol","toStringTag","Object","defineProperty","value","API_URL","dataMusic","playlist","favouriteMusic","localStorage","getItem","JSON","parse","audio","Audio","tracksCard","document","getElementsByClassName","player","querySelector","pauseBtn","stopBtn","prevBtn","nextBtn","muteBtn","favouriteBtn","playerRange","playerTimePassed","playerTimeTotal","volumeRange","trackTitle","trackArtist","headerLogo","searchForm","headerFavouriteBtn","catalogList","pausePlayer","trackActive","paused","play","classList","remove","pause","add","playMusic","e","preventDefault","currentTarget","contains","id","dataset","track","indexOf","i","find","item","index","src","mp3","textContent","artist","prevTrack","length","nextTrack","renderCard","li","createElement","innerHTML","poster","firstElementChild","renderCatalog","dataList","listCards","map","append","addEventListener","addClickTrack","catalogAddBtn","createAddBtn","checkCount","children","clientHeight","style","display","updateTime","total","duration","currentTime","progress","max","minutesPassed","Math","floor","secondsPassed","minutesTotal","secondsTotal","forEach","eventListeners","dispatchEvent","Event","bubbles","callee","timeout","timer","updateTimeThrottle","args","setTimeout","clearTimeout","data","filter","includes","push","splice","setItem","stringify","volume","fetch","search","then","json","init"],"sourceRoot":""}